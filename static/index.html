<!DOCTYPE html>

<html lang="en">
   <head>
    <link rel="stylesheet" href="style.css">
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
        	DOCUMENT
        </title>        
    </head>
<body>

   <h1>Registration</h1>
   <form id="reg-form">
         <input type="text" id="username" placeholder="Username" />
         <br>
         <input type="password" id="passowrd" placeholder="Password" />
         <br>
         <input type="submit" value="Submit Form" />
    </form>
    <a href="login.html">click here if you already have register </a>  
    <script>
      const form = document.getElementById('reg-form')
      form.addEventListener('submit',registerUser)

      async function registerUser(event) {
       event.preventDefault()
       const username = document.getElementById('username').value
       const password = document.getElementById('passowrd').value

       
      const result = await fetch('/api/register',{
      method: 'POST',
      headers :{
         'Content-Type' : 'application/json' 
      },
      body:JSON.stringify({
      	username,password
      })

      }).then((res)=>res.json())


       if(result.status==='ok')
       {
          alert('user create successfully');
          var url='./event.html'+'?'+username;
          setTimeout(function(){location.href=url},1000);
       }else {
         alert(result.error)
       }	


      }
      


    </script>          

</body>
</html>